<p-toast position="top-center"></p-toast>
<div class="min-h-screen bg-linear-to-b from-red-500 to-red-600 flex flex-col">
  <div class="flex-1 flex flex-col items-center justify-center px-6 pt-16 pb-8">
    <div class="flex items-center mb-8">
      <lucide-icon [img]="Utensils" class="w-8 h-8 text-white mr-2"></lucide-icon>
      <h1 class="text-4xl font-bold text-white">JÄ«ao</h1>
    </div>

    <div class="flex items-center gap-2 mb-4">
      <div class="flex items-center">
        <div
          [class]="
            currentStep >= 1
              ? 'w-8 h-8 rounded-full bg-white text-red-500 flex items-center justify-center font-bold'
              : 'w-8 h-8 rounded-full bg-red-300 text-white flex items-center justify-center'
          "
        >
          1
        </div>
      </div>
      <div [class]="currentStep >= 2 ? 'w-12 h-1 bg-white' : 'w-12 h-1 bg-red-300'"></div>
      <div class="flex items-center">
        <div
          [class]="
            currentStep >= 2
              ? 'w-8 h-8 rounded-full bg-white text-red-500 flex items-center justify-center font-bold'
              : 'w-8 h-8 rounded-full bg-red-300 text-white flex items-center justify-center'
          "
        >
          2
        </div>
      </div>
    </div>

    <p class="text-white text-sm">
      {{ currentStep === 1 ? 'Personal Information' : 'Market Stall Details' }}
    </p>
  </div>

  <div class="bg-white rounded-t-3xl px-6 py-8 flex-1">
    <form *ngIf="currentStep === 1" class="space-y-6">
      <div>
        <label class="block text-gray-900 text-sm font-semibold mb-3">First Name</label>
        <input
          type="text"
          [(ngModel)]="firstName"
          name="firstName"
          placeholder="Enter your first name"
          class="w-full px-4 py-4 bg-gray-50 border border-gray-200 rounded-2xl focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent placeholder-gray-400 text-gray-900"
          required
        />
      </div>

      <div>
        <label class="block text-gray-900 text-sm font-semibold mb-3">Last Name</label>
        <input
          type="text"
          [(ngModel)]="lastName"
          name="lastName"
          placeholder="Enter your last name"
          class="w-full px-4 py-4 bg-gray-50 border border-gray-200 rounded-2xl focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent placeholder-gray-400 text-gray-900"
          required
        />
      </div>

      <div>
        <label class="block text-gray-900 text-sm font-semibold mb-3">Email Address</label>
        <input
          type="email"
          [(ngModel)]="email"
          name="email"
          placeholder="Enter your email address"
          class="w-full px-4 py-4 bg-gray-50 border border-gray-200 rounded-2xl focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent placeholder-gray-400 text-gray-900"
          required
        />
      </div>

      <div>
        <label class="block text-gray-900 text-sm font-semibold mb-3">Password</label>
        <div class="relative">
          <input
            [type]="showPassword ? 'text' : 'password'"
            [(ngModel)]="password"
            name="password"
            placeholder="Enter your password"
            class="w-full px-4 py-4 pr-12 bg-gray-50 border border-gray-200 rounded-2xl focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent placeholder-gray-400 text-gray-900"
            required
          />
          <button
            type="button"
            (click)="togglePasswordVisibility()"
            class="absolute right-4 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600"
          >
            <lucide-icon [img]="showPassword ? EyeOff : Eye" class="w-5 h-5"> </lucide-icon>
          </button>
        </div>
      </div>

      <div>
        <label class="block text-gray-900 text-sm font-semibold mb-3">Confirm Password</label>
        <div class="relative">
          <input
            [type]="showConfirmPassword ? 'text' : 'password'"
            [(ngModel)]="confirmPassword"
            name="confirmPassword"
            placeholder="Confirm your password"
            class="w-full px-4 py-4 pr-12 bg-gray-50 border border-gray-200 rounded-2xl focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent placeholder-gray-400 text-gray-900"
            required
          />
          <button
            type="button"
            (click)="toggleConfirmPasswordVisibility()"
            class="absolute right-4 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600"
          >
            <lucide-icon [img]="showConfirmPassword ? EyeOff : Eye" class="w-5 h-5"> </lucide-icon>
          </button>
        </div>
      </div>

      <div *ngIf="failedRegister">
        <span class="text-red-500 text-sm">{{ errorMessage }}</span>
      </div>

      <button
        type="button"
        (click)="nextStep()"
        [disabled]="isRegistering"
        class="w-full bg-red-500 hover:bg-red-600 text-white font-bold py-4 rounded-2xl transition-colors duration-200 shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed"
      >
        {{ isRegistering ? 'Creating Account...' : 'Continue' }}
      </button>
    </form>

    <form *ngIf="currentStep === 2" (ngSubmit)="onSubmit()" class="space-y-6">
      <div>
        <h2 class="text-2xl font-bold text-gray-900 mb-2">Setup your market stall</h2>
        <p class="text-gray-600 text-sm mb-6">Tell customers about your business</p>

        <label class="block text-gray-900 text-sm font-semibold mb-3">Market Stall Name</label>
        <input
          type="text"
          [(ngModel)]="stallName"
          name="stallName"
          placeholder="e.g., Juan's Fresh Produce"
          class="w-full px-4 py-4 bg-gray-50 border border-gray-200 rounded-2xl focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent placeholder-gray-400 text-gray-900"
          required
        />
      </div>

      <div>
        <label class="block text-gray-900 text-sm font-semibold mb-3">Description</label>
        <textarea
          [(ngModel)]="stallDescription"
          name="stallDescription"
          placeholder="Describe what you sell and what makes your stall special"
          rows="3"
          class="w-full px-4 py-4 bg-gray-50 border border-gray-200 rounded-2xl focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent placeholder-gray-400 text-gray-900 resize-none"
          required
        ></textarea>
      </div>

      <div>
        <label class="block text-gray-900 text-sm font-semibold mb-3">Location</label>
        <input
          type="text"
          [(ngModel)]="stallLocation"
          name="stallLocation"
          placeholder="e.g., Central Market, Stand 45"
          class="w-full px-4 py-4 bg-gray-50 border border-gray-200 rounded-2xl focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent placeholder-gray-400 text-gray-900"
          required
        />
      </div>

      <div *ngIf="failedRegister">
        <span class="text-red-500 text-sm">{{ errorMessage }}</span>
      </div>

      <div class="flex gap-3">
        <button
          type="button"
          (click)="previousStep()"
          [disabled]="isRegistering"
          class="w-1/3 bg-gray-200 hover:bg-gray-300 text-gray-700 font-bold py-4 rounded-2xl transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed"
        >
          Back
        </button>
        <button
          type="submit"
          [disabled]="isRegistering"
          class="flex-1 bg-red-500 hover:bg-red-600 text-white font-bold py-4 rounded-2xl transition-colors duration-200 shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed"
        >
          {{ isRegistering ? 'Creating Market Stall...' : 'Complete Registration' }}
        </button>
      </div>
    </form>
  </div>
</div>
