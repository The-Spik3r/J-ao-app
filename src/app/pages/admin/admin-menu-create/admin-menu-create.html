<div class="min-h-screen bg-gray-50 p-6">
  <div class="max-w-2xl mx-auto">
    <div class="mb-6">
      <button (click)="goBack()" class="text-red-600 hover:text-red-800 mb-4 flex items-center">
        <lucide-icon [img]="ArrowLeft" class="w-5 h-5 mr-2"></lucide-icon>
        Back to Menu Management
      </button>
      <h1 class="text-3xl font-bold text-gray-900">Create New Menu Item</h1>
      <p class="text-gray-600 mt-2">Add a new item to your menu catalog</p>
    </div>

    <div *ngIf="isLoading" class="bg-white rounded-lg shadow-md p-6">
      <div class="animate-pulse">
        <div class="h-4 bg-gray-200 rounded w-1/4 mb-4"></div>
        <div class="space-y-3">
          <div class="h-4 bg-gray-200 rounded"></div>
          <div class="h-4 bg-gray-200 rounded w-5/6"></div>
        </div>
      </div>
    </div>

    <div *ngIf="!isLoading" class="bg-white rounded-lg shadow-md p-6">
      <div
        *ngIf="errorMessage"
        class="mb-4 p-4 bg-red-100 border border-red-400 text-red-700 rounded"
      >
        {{ errorMessage }}
      </div>

      <form [formGroup]="menuForm" (ngSubmit)="onSubmit()">
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
          <div class="mb-4">
            <label for="name" class="block text-sm font-medium text-gray-700 mb-2">Name *</label>
            <input
              type="text"
              id="name"
              formControlName="name"
              class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent"
              placeholder="Enter menu item name"
            />
            <div
              *ngIf="menuForm.get('name')?.invalid && menuForm.get('name')?.touched"
              class="text-red-600 text-sm mt-1"
            >
              Name is required and must be at least 2 characters long.
            </div>
          </div>

          <div class="mb-4">
            <label for="price" class="block text-sm font-medium text-gray-700 mb-2">Price *</label>
            <input
              type="number"
              id="price"
              formControlName="price"
              step="0.01"
              min="0"
              class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent"
              placeholder="0.00"
            />
            <div
              *ngIf="menuForm.get('price')?.invalid && menuForm.get('price')?.touched"
              class="text-red-600 text-sm mt-1"
            >
              Price is required and must be greater than 0.
            </div>
          </div>

          <div class="mb-4">
            <label for="stock" class="block text-sm font-medium text-gray-700 mb-2">Stock *</label>
            <input
              type="number"
              id="stock"
              formControlName="stock"
              min="0"
              class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent"
              placeholder="0"
            />
            <div
              *ngIf="menuForm.get('stock')?.invalid && menuForm.get('stock')?.touched"
              class="text-red-600 text-sm mt-1"
            >
              Stock is required and must be 0 or greater.
            </div>
          </div>

          <div class="mb-4">
            <label for="categoryId" class="block text-sm font-medium text-gray-700 mb-2"
              >Category *</label
            >
            <select
              id="categoryId"
              formControlName="categoryId"
              class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent"
            >
              <option value="0">Select a category</option>
              <option *ngFor="let category of categories" [value]="category.id">
                {{ category.name }}
              </option>
            </select>
            <div
              *ngIf="menuForm.get('categoryId')?.invalid && menuForm.get('categoryId')?.touched"
              class="text-red-600 text-sm mt-1"
            >
              Please select a category.
            </div>
          </div>
        </div>

        <div class="mb-4">
          <label for="description" class="block text-sm font-medium text-gray-700 mb-2"
            >Description *</label
          >
          <textarea
            id="description"
            formControlName="description"
            rows="4"
            class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent"
            placeholder="Enter menu item description"
          ></textarea>
          <div
            *ngIf="menuForm.get('description')?.invalid && menuForm.get('description')?.touched"
            class="text-red-600 text-sm mt-1"
          >
            Description is required and must be at least 10 characters long.
          </div>
        </div>

        <div class="mb-4">
          <label for="imageUrl" class="block text-sm font-medium text-gray-700 mb-2"
            >Image URL *</label
          >
          <input
            type="url"
            id="imageUrl"
            formControlName="imageUrl"
            class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent"
            placeholder="https://example.com/image.jpg"
          />
          <div
            *ngIf="menuForm.get('imageUrl')?.invalid && menuForm.get('imageUrl')?.touched"
            class="text-red-600 text-sm mt-1"
          >
            Image URL is required.
          </div>
        </div>

        <div class="mb-6">
          <label class="flex items-center">
            <input
              type="checkbox"
              formControlName="isFeatured"
              class="mr-2 h-4 w-4 text-red-600 focus:ring-red-500 border-gray-300 rounded"
            />
            <span class="text-sm font-medium text-gray-700">Featured Item</span>
          </label>
        </div>

        <div class="flex gap-4">
          <button
            type="submit"
            [disabled]="menuForm.invalid || isSubmitting"
            class="flex-1 bg-red-600 text-white py-2 px-4 rounded-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed"
          >
            <span *ngIf="!isSubmitting">Create Menu Item</span>
            <span *ngIf="isSubmitting">Creating...</span>
          </button>

          <button
            type="button"
            (click)="goBack()"
            class="px-6 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2"
          >
            Cancel
          </button>
        </div>
      </form>
    </div>
  </div>
</div>
